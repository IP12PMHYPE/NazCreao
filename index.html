<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NazCreao - Creao 1 Neural Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            --accent: #6366f1;
            --accent-glow: rgba(99, 102, 241, 0.15);
            --bg: #050507;
            --card: rgba(20, 20, 25, 0.7);
            --border: rgba(255, 255, 255, 0.08);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg);
            color: #f8fafc;
            overflow-x: hidden;
            letter-spacing: -0.01em;
        }

        .glass {
            background: var(--card);
            backdrop-filter: blur(12px);
            border: 1px solid var(--border);
        }

        .mask-text {
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            transition: background 0.1s ease;
        }

        .custom-cursor {
            pointer-events: none;
            position: fixed;
            width: 500px;
            height: 500px;
            border-radius: 50%;
            mix-blend-mode: screen;
            opacity: 0.4;
            filter: blur(100px);
            z-index: 150;
            background: radial-gradient(circle, var(--accent) 0%, transparent 70%);
            transform: translate(-50%, -50%);
            display: none;
        }

        .intro-active .custom-cursor {
            display: block;
        }

        .fade-in {
            animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
        
        .media-slot {
            aspect-ratio: 1/1;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid transparent;
        }
        
        .media-slot:hover {
            transform: scale(1.05);
            border-color: rgba(255,255,255,0.2);
        }

        .nav-active {
            background: rgba(255, 255, 255, 0.08);
            color: white !important;
            box-shadow: inset 0 0 10px rgba(255,255,255,0.05);
        }

        .btn-primary {
            background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
            box-shadow: 0 10px 25px -5px rgba(79, 70, 229, 0.4);
        }

        .input-glow:focus {
            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
            border-color: rgba(99, 102, 241, 0.4);
        }
    </style>
</head>
<body class="intro-active">
    <div id="cursor" class="custom-cursor"></div>

    <!-- Hero / Intro -->
    <div id="intro-page" class="fixed inset-0 z-[100] bg-[#050507] flex flex-col items-center justify-center overflow-hidden">
        <div class="absolute inset-0 opacity-20">
            <div class="absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_50%_50%,_#1e1b4b_0%,_transparent_50%)]"></div>
        </div>

        <div class="relative z-10 flex flex-col items-center text-center px-6 pointer-events-none">
            <div class="relative group">
                <h1 class="text-[90px] md:text-[160px] font-extrabold tracking-tighter text-white/5 leading-none mb-4">NazCreao</h1>
                <h1 id="reveal-text" class="absolute inset-0 text-[90px] md:text-[160px] font-extrabold tracking-tighter leading-none select-none mask-text"
                    style="background-image: radial-gradient(circle 200px at 50% 50%, #fff 0%, rgba(255,255,255,0.1) 70%, transparent 100%), linear-gradient(to right, #818cf8, #6366f1);">
                    NazCreao
                </h1>
            </div>
            
            <div class="mt-4 space-y-2 fade-in" style="animation-delay: 0.3s">
                <p class="text-lg md:text-xl text-slate-400 font-light tracking-wide uppercase tracking-[0.3em]">Neural Engine v1.0</p>
                <p class="text-sm text-slate-600 max-w-sm mx-auto font-medium">Elevating visual storytelling through Creao 1 architecture.</p>
            </div>

            <button onclick="startApp()" class="mt-12 pointer-events-auto group relative px-12 py-5 bg-white text-black rounded-full font-bold transition-all hover:scale-105 active:scale-95 flex items-center gap-3">
                Begin Sequence <i data-lucide="arrow-right" class="w-5 h-5 group-hover:translate-x-1 transition-transform"></i>
            </button>
        </div>
    </div>

    <!-- App Shell -->
    <div id="app-container" class="hidden min-h-screen flex flex-col">
        <header class="border-b border-white/5 bg-[#050507]/80 backdrop-blur-2xl sticky top-0 z-50">
            <div class="max-w-[1400px] mx-auto px-8 h-20 flex items-center justify-between">
                <div class="flex items-center gap-4 cursor-pointer group" onclick="location.reload()">
                    <div class="w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20">
                        <i data-lucide="box" class="text-white w-5 h-5"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-extrabold tracking-tight">NazCreao</h1>
                        <p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest leading-none">Creao 1 Engine</p>
                    </div>
                </div>

                <nav class="flex items-center gap-1 bg-white/5 p-1.5 rounded-2xl border border-white/10">
                    <button onclick="setTab('generate')" id="tab-generate" class="tab-btn px-6 py-2.5 rounded-xl text-sm font-bold transition-all nav-active">Generate</button>
                    <button onclick="setTab('edit')" id="tab-edit" class="tab-btn px-6 py-2.5 rounded-xl text-sm font-bold transition-all text-slate-500 hover:text-slate-300">Edit</button>
                    <button onclick="setTab('history')" id="tab-history" class="tab-btn px-6 py-2.5 rounded-xl text-sm font-bold transition-all text-slate-500 hover:text-slate-300">History</button>
                </nav>

                <div class="flex items-center gap-3">
                    <div class="hidden md:block text-right">
                        <p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest">Status</p>
                        <p class="text-[11px] text-emerald-400 font-bold">Neural Sync Active</p>
                    </div>
                    <div class="w-10 h-10 rounded-full bg-slate-800 border border-white/10 flex items-center justify-center">
                        <i data-lucide="user" class="w-4 h-4 text-slate-400"></i>
                    </div>
                </div>
            </div>
        </header>

        <main class="max-w-[1400px] mx-auto w-full p-8 grid grid-cols-1 lg:grid-cols-12 gap-10 flex-1">
            <!-- Left Control Panel -->
            <aside id="side-panel" class="lg:col-span-4 space-y-8">
                <div class="glass rounded-[32px] p-8 space-y-6">
                    <div>
                        <label class="text-[11px] font-bold text-slate-500 uppercase tracking-widest mb-3 block">Neural Prompt</label>
                        <textarea id="prompt-input" placeholder="An ethereal landscape where time flows like liquid neon..." class="w-full h-48 bg-black/40 border border-white/10 rounded-2xl p-5 text-sm outline-none transition-all resize-none input-glow font-medium text-slate-200 placeholder:text-slate-600"></textarea>
                    </div>

                    <div class="flex gap-3">
                        <button onclick="document.getElementById('file-upload').click()" class="aspect-square w-16 glass rounded-2xl text-slate-400 hover:bg-white/10 transition-all flex items-center justify-center group" title="Upload Reference">
                            <i data-lucide="image-plus" class="w-6 h-6 group-hover:scale-110 transition-transform"></i>
                        </button>
                        <input type="file" id="file-upload" class="hidden" accept="image/*" multiple>
                        
                        <button id="generate-btn" onclick="handleGenerate()" class="flex-1 py-4 rounded-2xl btn-primary font-bold text-white transition-all flex items-center justify-center gap-3 active:scale-95">
                            <i data-lucide="zap" class="w-5 h-5"></i> Ignite Creao 1
                        </button>
                    </div>
                </div>

                <div id="media-queue-container" class="hidden glass rounded-[32px] p-6">
                    <h4 class="text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-4">Neural Buffer</h4>
                    <div id="media-queue" class="grid grid-cols-4 gap-3"></div>
                </div>
            </aside>

            <!-- Main Workspace -->
            <section id="content-panel" class="lg:col-span-8">
                <!-- Generate View -->
                <div id="view-generate" class="h-full min-h-[600px] flex flex-col">
                    <div id="placeholder" class="flex-1 flex flex-col items-center justify-center border-2 border-dashed border-white/5 rounded-[48px] bg-white/[0.01]">
                        <div class="relative mb-8">
                            <div class="absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full"></div>
                            <div class="w-24 h-24 glass rounded-[32px] flex items-center justify-center border border-white/10 relative">
                                <i data-lucide="cpu" class="w-10 h-10 text-slate-500"></i>
                            </div>
                        </div>
                        <h3 class="text-2xl font-bold text-slate-300">Standby for Initialization</h3>
                        <p class="text-slate-500 mt-2 max-w-sm text-center text-sm font-medium">Input your parameters to trigger the Creao 1 visualization sequence.</p>
                    </div>

                    <div id="result-display" class="hidden fade-in space-y-8 h-full">
                        <div class="relative group rounded-[48px] overflow-hidden border border-white/10 shadow-[0_40px_100px_-20px_rgba(0,0,0,0.8)] bg-black">
                            <img id="main-output" src="" class="w-full h-auto object-contain" alt="Output">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                            <div class="absolute bottom-8 left-8 right-8 flex justify-between items-center translate-y-4 group-hover:translate-y-0 opacity-0 group-hover:opacity-100 transition-all duration-300">
                                <div class="glass px-6 py-3 rounded-2xl flex items-center gap-3">
                                    <div class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></div>
                                    <span class="text-xs font-bold uppercase tracking-widest">Synthesis Complete</span>
                                </div>
                                <div class="flex gap-3">
                                    <button onclick="downloadCurrent()" class="p-4 glass rounded-2xl hover:bg-white/10 transition-colors">
                                        <i data-lucide="download" class="text-white w-5 h-5"></i>
                                    </button>
                                    <button onclick="setTab('edit')" class="p-4 glass rounded-2xl hover:bg-white/10 transition-colors">
                                        <i data-lucide="sliders" class="text-white w-5 h-5"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Edit View -->
                <div id="view-edit" class="hidden h-full">
                    <div class="glass rounded-[48px] p-10 h-full flex flex-col fade-in">
                        <div id="edit-empty" class="flex-1 flex flex-col items-center justify-center text-center">
                            <i data-lucide="layers" class="w-12 h-12 text-slate-700 mb-4"></i>
                            <p class="text-slate-500 font-medium">No neural assets in current workspace.</p>
                            <button onclick="document.getElementById('file-upload').click()" class="mt-6 px-10 py-4 glass hover:bg-white/5 rounded-2xl text-sm font-bold transition-all">Import Assets</button>
                        </div>
                        
                        <div id="edit-workspace" class="hidden space-y-10">
                             <div class="grid grid-cols-1 lg:grid-cols-12 gap-10">
                                <div class="lg:col-span-7 relative rounded-[32px] overflow-hidden border border-white/10 bg-black aspect-square">
                                    <img id="edit-preview" src="" class="w-full h-full object-contain">
                                </div>
                                <div class="lg:col-span-5 flex flex-col justify-center space-y-8">
                                    <div>
                                        <h4 class="text-[11px] font-bold text-slate-500 uppercase tracking-widest mb-4">Neural Refinement</h4>
                                        <textarea id="edit-instruction" class="w-full h-40 bg-black/40 border border-white/10 rounded-2xl p-5 text-sm outline-none transition-all resize-none input-glow font-medium" placeholder="E.g. 'Add a cinematic fog and change lighting to twilight'"></textarea>
                                    </div>
                                    <button onclick="handleEdit('generic')" class="w-full py-5 bg-white text-black font-extrabold rounded-2xl hover:bg-indigo-50 transition-all shadow-xl active:scale-95">
                                        Execute Refinement
                                    </button>
                                </div>
                             </div>
                             
                             <div class="pt-8 border-t border-white/5">
                                <div class="flex items-center justify-between mb-6">
                                    <h4 class="text-[11px] font-bold text-slate-500 uppercase tracking-widest">Neural Library</h4>
                                    <button onclick="document.getElementById('file-upload').click()" class="text-indigo-400 font-bold text-xs hover:underline">Add Neural Source</button>
                                </div>
                                <div id="media-library" class="grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4"></div>
                             </div>
                        </div>
                    </div>
                </div>

                <!-- History View -->
                <div id="view-history" class="hidden fade-in">
                    <div class="flex items-center justify-between mb-10">
                        <h2 class="text-2xl font-bold">Neural Archive</h2>
                        <span class="text-xs font-bold text-slate-500 uppercase tracking-widest">Creao 1 Logs</span>
                    </div>
                    <div id="history-grid" class="grid grid-cols-2 md:grid-cols-3 gap-8"></div>
                </div>
            </section>
        </main>
    </div>

    <!-- Loading -->
    <div id="loading-overlay" class="hidden fixed inset-0 z-[200] bg-[#050507]/95 backdrop-blur-xl flex flex-col items-center justify-center gap-8">
        <div class="relative">
            <div class="w-32 h-32 border-[6px] border-indigo-500/10 border-t-indigo-500 rounded-full animate-spin"></div>
            <div class="absolute inset-0 flex items-center justify-center">
                <i data-lucide="radio" class="w-10 h-10 text-indigo-400 animate-pulse"></i>
            </div>
        </div>
        <div class="text-center space-y-2">
            <p class="text-indigo-300 font-bold text-xs uppercase tracking-[0.4em]">Creao 1 Processing</p>
            <p class="text-slate-600 text-[10px] font-mono">NEURAL_SYNTHESIS_IN_PROGRESS...</p>
        </div>
    </div>

    <script>
        const apiKey = ""; 
        let history = [];
        let sessionAssets = [];
        let currentImage = null;

        lucide.createIcons();

        // Aesthetic Cursor Interaction
        document.addEventListener('mousemove', (e) => {
            const cursor = document.getElementById('cursor');
            const revealText = document.getElementById('reveal-text');
            const x = (e.clientX / window.innerWidth) * 100;
            const y = (e.clientY / window.innerHeight) * 100;
            
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
            
            if (revealText) {
                revealText.style.backgroundImage = `radial-gradient(circle 200px at ${x}% ${y}%, #fff 0%, rgba(255,255,255,0.1) 70%, transparent 100%), linear-gradient(to right, #818cf8, #6366f1)`;
            }
        });

        function startApp() {
            const intro = document.getElementById('intro-page');
            intro.style.opacity = '0';
            intro.style.transition = 'opacity 0.6s ease';
            setTimeout(() => {
                intro.style.display = 'none';
                document.body.classList.remove('intro-active');
                document.getElementById('app-container').classList.remove('hidden');
                document.getElementById('app-container').classList.add('fade-in');
            }, 600);
        }

        function setTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('nav-active', 'text-slate-500'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.add('text-slate-500'));
            const activeBtn = document.getElementById('tab-' + tab);
            activeBtn.classList.add('nav-active');
            activeBtn.classList.remove('text-slate-500');

            ['generate', 'edit', 'history'].forEach(t => document.getElementById('view-' + t).classList.add('hidden'));
            document.getElementById('view-' + tab).classList.remove('hidden');
            
            if (tab === 'history') renderHistory();
            if (tab === 'edit') updateEditView();
            
            // Layout Adjustments
            const sidePanel = document.getElementById('side-panel');
            const contentPanel = document.getElementById('content-panel');
            if (tab === 'generate') {
                sidePanel.classList.remove('hidden');
                contentPanel.classList.replace('lg:col-span-12', 'lg:col-span-8');
            } else {
                sidePanel.classList.add('hidden');
                contentPanel.classList.replace('lg:col-span-8', 'lg:col-span-12');
            }
        }

        async function fetchWithRetry(url, options, retries = 5, delay = 1000) {
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (!response.ok) throw new Error(`HTTP ${response.status}`);
                    return await response.json();
                } catch (err) {
                    if (i === retries - 1) throw err;
                    await new Promise(r => setTimeout(r, delay));
                    delay *= 2;
                }
            }
        }

        async function handleGenerate() {
            const prompt = document.getElementById('prompt-input').value;
            if (!prompt.trim()) return;
            showLoading(true);
            try {
                const imageUrl = await generateImage(prompt);
                const result = { id: Date.now(), prompt, imageUrl, timestamp: new Date().toLocaleTimeString() };
                currentImage = result;
                history.unshift(result);
                sessionAssets.unshift(result);
                displayResult(result);
                updateMediaQueue();
            } catch (e) {
                console.error(e);
            } finally {
                showLoading(false);
            }
        }

        async function generateImage(promptText) {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/imagen-4.0-generate-001:predict?key=${apiKey}`;
            const data = await fetchWithRetry(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ instances: { prompt: promptText }, parameters: { sampleCount: 1 } })
            });
            return `data:image/png;base64,${data.predictions[0].bytesBase64Encoded}`;
        }

        async function handleEdit(mode) {
            if (!currentImage) return;
            const instruction = document.getElementById('edit-instruction').value;
            showLoading(true);
            try {
                const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image-preview:generateContent?key=${apiKey}`;
                const data64 = currentImage.imageUrl.split(',')[1];
                const data = await fetchWithRetry(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: instruction || "Refine lighting and details" }, { inlineData: { mimeType: "image/png", data: data64 } }] }],
                        generationConfig: { responseModalities: ['TEXT', 'IMAGE'] }
                    })
                });
                const out64 = data.candidates?.[0]?.content?.parts?.find(p => p.inlineData)?.inlineData?.data;
                const result = { id: Date.now(), prompt: instruction, imageUrl: `data:image/png;base64,${out64}`, timestamp: new Date().toLocaleTimeString() };
                currentImage = result;
                history.unshift(result);
                sessionAssets.unshift(result);
                setTab('generate');
                displayResult(result);
            } catch (e) {
                console.error(e);
            } finally {
                showLoading(false);
            }
        }

        function displayResult(res) {
            document.getElementById('placeholder').classList.add('hidden');
            document.getElementById('result-display').classList.remove('hidden');
            document.getElementById('main-output').src = res.imageUrl;
        }

        function updateEditView() {
            const workspace = document.getElementById('edit-workspace');
            const library = document.getElementById('media-library');
            if (sessionAssets.length > 0) {
                document.getElementById('edit-empty').classList.add('hidden');
                workspace.classList.remove('hidden');
                if (!currentImage) currentImage = sessionAssets[0];
                document.getElementById('edit-preview').src = currentImage.imageUrl;
                library.innerHTML = '';
                sessionAssets.forEach(asset => {
                    const slot = document.createElement('div');
                    const isActive = currentImage.id === asset.id;
                    slot.className = `media-slot rounded-2xl overflow-hidden glass ${isActive ? 'ring-2 ring-indigo-500 ring-offset-4 ring-offset-[#050507]' : ''}`;
                    slot.onclick = () => { currentImage = asset; updateEditView(); };
                    slot.innerHTML = `<img src="${asset.imageUrl}" class="w-full h-full object-cover">`;
                    library.appendChild(slot);
                });
            } else {
                document.getElementById('edit-empty').classList.remove('hidden');
                workspace.classList.add('hidden');
            }
        }

        function updateMediaQueue() {
            const container = document.getElementById('media-queue-container');
            const queue = document.getElementById('media-queue');
            if (sessionAssets.length > 0) {
                container.classList.remove('hidden');
                queue.innerHTML = '';
                sessionAssets.slice(0, 4).forEach(asset => {
                    const div = document.createElement('div');
                    div.className = 'aspect-square rounded-xl overflow-hidden border border-white/10 opacity-40 hover:opacity-100 transition-all cursor-pointer hover:scale-105';
                    div.onclick = () => { currentImage = asset; setTab('edit'); };
                    div.innerHTML = `<img src="${asset.imageUrl}" class="w-full h-full object-cover">`;
                    queue.appendChild(div);
                });
            }
        }

        function renderHistory() {
            const grid = document.getElementById('history-grid');
            grid.innerHTML = '';
            history.forEach(item => {
                const card = document.createElement('div');
                card.className = 'group relative aspect-square rounded-[32px] overflow-hidden glass border border-white/5 cursor-pointer hover:border-indigo-500/50 transition-all';
                card.onclick = () => { currentImage = item; setTab('generate'); displayResult(item); };
                card.innerHTML = `
                    <img src="${item.imageUrl}" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent flex flex-col justify-end p-6 opacity-0 group-hover:opacity-100 transition-opacity">
                        <p class="text-[10px] font-bold text-indigo-400 uppercase tracking-widest">${item.timestamp}</p>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function showLoading(show) { document.getElementById('loading-overlay').classList.toggle('hidden', !show); }
        function downloadCurrent() { if (currentImage) { const a = document.createElement('a'); a.href = currentImage.imageUrl; a.download = 'creao1-export.png'; a.click(); } }

        document.getElementById('file-upload').addEventListener('change', async (e) => {
            const files = Array.from(e.target.files);
            showLoading(true);
            for (const file of files) {
                const dataUrl = await new Promise(r => { const reader = new FileReader(); reader.onload = ev => r(ev.target.result); reader.readAsDataURL(file); });
                const asset = { id: Date.now() + Math.random(), prompt: file.name, imageUrl: dataUrl, timestamp: 'Imported' };
                sessionAssets.unshift(asset);
                if (!currentImage) currentImage = asset;
            }
            updateMediaQueue();
            updateEditView();
            showLoading(false);
            if (files.length > 0) setTab('edit');
        });
    </script>
</body>
</html>
